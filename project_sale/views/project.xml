<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="search_project_project_order_line" model="ir.ui.view">
        <field name="name">project.project.orderline.filter</field>
        <field name="model">project.project.orderline</field>
        <field name="priority" eval="15"/>
        <field name="arch" type="xml">
            <search string="Search">
                <field name="project_id" string="Project"/>
                <field name="project_sales_line_id" string="Estimation"/>
                <field name="product_id" string="Product"/>
                <group expand="0" string="Group By...">
                    <filter name="group_project" string="Project" domain="[ ]" context="{'group_by': 'project_id'}"/>
                    <filter name="group_estimation" string="Estimation" domain="[ ]"
                            context="{'group_by': 'project_sales_line_id'}"/>
                    <filter name="product" string="Product" domain="[ ]" context="{'group_by': 'product_id'}"/>
                    <filter name="sale" string="Sale Order" domain="[ ]" context="{'group_by': 'order_id'}"/>
                </group>
            </search>
        </field>
    </record>


    <record id="act_project_project_orderline_list_view" model="ir.actions.act_window">
        <field name="name">Project Order Lines</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">project.project.orderline</field>
        <field name="view_mode">list,form</field>
        <field name="context">{'search_default_group_project': 1, 'search_default_group_estimation': 1}</field>
        <!--        <field name="view_type">tree</field>-->
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to define a new orderline
            </p>
        </field>
    </record>

    <record id="act_my_project_project_orderline_list_view" model="ir.actions.act_window">
        <field name="name">My Project Order Lines</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">project.project.orderline</field>
        <field name="view_mode">list,form</field>
        <!--        <field name="view_type">tree</field>-->
        <field name="domain">[('project_id.user_id', '=', uid)]</field>
        <field name="context">{'search_default_group_project': 1, 'search_default_group_estimation': 1}</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to define a new orderline
            </p>
        </field>
    </record>

    <record id="act_project_sales_view" model="ir.actions.act_window">
        <field name="name">Estimated Sales Lines</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">project.sales.line</field>
        <field name="view_mode">list,form</field>
        <!--        <field name="view_type">tree</field>-->
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to define a new Estimation Lines
            </p>
        </field>
    </record>

    <record id="act_my_project_sales_view" model="ir.actions.act_window">
        <field name="name">My Estimated Sales Lines</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">project.sales.line</field>
        <field name="view_mode">list,form</field>
        <!--        <field name="view_type">tree</field>-->
        <field name="domain">[('project_id.user_id', '=', uid)]</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to define a new Estimation Lines
            </p>
        </field>
    </record>

    <record id="view_project_sales_list_view" model="ir.ui.view">
        <field name="model">project.sales.line</field>
        <field name="type">tree</field>
        <field name="priority" eval="1"/>
        <field name="arch" type="xml">
            <tree string="Estimated Sales Lines" default_order="id desc">
                <field name="project_id"/>
                <field name="product_id"/>
                <field name="name"/>
                <field name="product_qty" groups="account.group_account_manager" string="Tender Quantity"/>
                <field name="total_shop_qty"/>
                <field name="remarks"/>
            </tree>
        </field>
    </record>

    <record id="view_project_sales_form_view" model="ir.ui.view">
        <field name="name">project.sales.line.form</field>
        <field name="model">project.sales.line</field>
        <field name="arch" type="xml">
            <form string="Project Sales Estimations">
                <sheet string="Project Sales Estimations">
                    <div class="oe_title">
                        <group>
                            <h1>
                                <field name="name" readonly="1"/>
                            </h1>
                        </group>
                    </div>
                    <group>
                        <group>
                            <field name="project_id" readonly="1"/>
                            <field name="uom_id" readonly="1"/>
                            <field name="product_qty" readonly="1" groups="account.group_account_manager"/>
                        </group>
                        <group>
                            <field name="order_id" readonly="1" options="{'no_create': True, 'no_open': True}"/>
                            <field name="order_line_id" readonly="1" options="{'no_create': True, 'no_open': True}"/>
                        </group>
                    </group>
                    <notebook>
                        <page name="products" string="Products">
                            <field name="project_order_line_ids"
                                   context="{'default_order_line_id': order_line_id, 'default_project_id': project_id,}">
                                <tree string="Purchase Order Lines" editable="bottom">
                                    <field name="name" invisible="1"/>
                                    <field name="dcd_access" invisible="1"/>
                                    <field name="shop_access" invisible="1"/>
                                    <field name="order_line_id" invisible="1"/>
                                    <field name="project_id" invisible="1"/>
                                    <field name="sequence" widget="handle"/>
                                    <field name="product_id" required="1"
                                           options="{'no_create': True, 'no_create_edit':True}"
                                           attrs="{'readonly':['|', ('state','=','confirm'), '&amp;', ('shop_access','=', False), ('id','>',0)]}"/>
                                    <!--                                    <field name="dcd_qty" attrs="{'readonly':['|', ('state','=','confirm'), ('dcd_access','=', False)]}" />-->
                                    <field name="quantity" attrs="{'readonly':[('state','=','confirm')]}"/>
                                    <field name="cost" readonly="1"/>
                                    <field name="cost" invisible="1"/>
                                    <!--                                    <field name="shop_qty" attrs="{'readonly':['|', ('state','=','confirm'),'&amp;', ('shop_access','=', False), ('id','>',0)]}" />-->
                                    <!--                                    <field name="indented_qty" />-->
                                    <field name="state" invisible="1"/>
                                </tree>
                                <form>
                                    <group>
                                        <group>
                                            <field name="state" invisible="1"/>
                                            <field name="dcd_access" invisible="1"/>
                                            <field name="shop_access" invisible="1"/>
                                            <field name="project_id" invisible="1"/>
                                            <field name="order_id" invisible="1"/>
                                            <field name="order_line_id" invisible="1"/>
                                            <field name="product_id" required="1"
                                                   options="{'no_create': True, 'no_create_edit':True}"
                                                   attrs="{'readonly':['|', ('state','=','confirm'),  '&amp;', ('shop_access','=', False)]}"/>
                                        </group>
                                        <group>
                                            <!--                                            <field name="dcd_qty" attrs="{'readonly':['|', ('state','=','confirm'), ('dcd_access','=', False)]}" />-->
                                            <!--                                            <field name="shop_qty" attrs="{'readonly':['|', ('state','=','confirm'), ('shop_access','=', False)]}" />-->
                                            <field name="quantity" attrs="{'readonly':[('state','=','confirm')]}"/>
                                        </group>
                                    </group>
                                </form>
                            </field>

                            <field name="remarks" placeholder="Enter remarks here"/>

                        </page>
                    </notebook>
                </sheet>
                <div class="o_attachment_preview"/>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <record id="act_project_project_list_view" model="ir.actions.act_window">
        <field name="name">Projects</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">project.project</field>
        <field name="view_mode">list,form</field>
        <!--        <field name="view_type">tree</field>-->
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to define a new orderline
            </p>
        </field>
    </record>
    <record id="act_my_project_project_list_view" model="ir.actions.act_window">
        <field name="name">My Projects</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">project.project</field>
        <field name="view_mode">list,form</field>
        <!--        <field name="view_type">tree</field>-->
        <field name="domain">[('user_id', '=', uid)]</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to define a new orderline
            </p>
        </field>
    </record>


    <record id="project_indent_list_view" model="ir.ui.view">
        <field name="model">project.delivery.indent</field>
        <field name="type">tree</field>
        <field name="priority" eval="1"/>
        <field name="arch" type="xml">
            <tree string="Project Info" default_order="id desc" editable="top">
                <field name="project_id" attrs="{'readonly':[('is_readonly','=', True)]}"/>
                <field name="product_id" readonly="1"/>
                <field name="name" readonly="1"/>
                <field name="uom_id" readonly="1"/>
                <field name="product_cost" readonly="1"/>
                <field name="product_cost" invisible="1"/>
                <field name="cost" sum="Total Cost"/>
                <field name="product_qty" readonly="1" sum="Total Quantity"/>
                <field name="estimated_qty" readonly="1"/>
                <field name="delivered_qty" readonly="1"/>
                <field name="is_readonly" invisible="1"/>

            </tree>
        </field>
    </record>


    <record id="project_indent_list_quick_add_view" model="ir.ui.view">
        <field name="model">project.delivery.indent</field>
        <field name="type">tree</field>
        <field name="priority" eval="1"/>
        <field name="arch" type="xml">
            <tree string="Project Info" default_order="id desc" editable="top">
                <field name="project_id" options="{'no_create': True, 'no_create_edit':True}"
                       attrs="{'readonly':[('is_readonly','=', True)]}"/>
                <field name="product_id" domain="[('type', '!=', 'service')]"
                       options="{'no_create': True, 'no_create_edit':True}"
                       attrs="{'readonly':[('is_readonly','=', True)]}"/>
                <field name="name" attrs="{'readonly':[('is_readonly','=', True)]}"/>
                <field name="uom_id" invisible="1"/>
                <field name="quantity_on_hand" readonly="1"/>
                <field name="product_qty" attrs="{'readonly':[('is_readonly','=', True)]}"/>
                <field name="product_cost" readonly="1"/>
                <field name="product_cost" invisible="1"/>
                <field name="cost" sum="Total Cost"/>
                <field name="estimated_qty" readonly="1" invisible="1"/>
                <field name="delivered_qty" readonly="1"/>
                <field name="is_readonly" invisible="1"/>
<!--                <field name="total_qty_delivered"/>-->
                <field name="qty_return_quantity" readonly="1" force_save="1"/>
                <field name="qty_balance_delivery" readonly="1" force_save="1"/>

            </tree>
        </field>
    </record>

    <record id="act_project_indent_list" model="ir.actions.act_window">
        <field name="name">Project Consumable Indents</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">project.delivery.indent</field>
        <field name="view_mode">tree</field>
        <field name="context">{'tree_view_ref':'project_indent_list_quick_add_view'}</field>
        <field name="view_ids" eval="
                            [
                            (5, 0, 0),
                            (0, 0, {'view_mode': 'tree', 'view_id': ref('project_indent_list_quick_add_view')}),
                          ]"/>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to define a new Consumable Indent
            </p>
        </field>
    </record>

    <record id="act_my_project_indent_list" model="ir.actions.act_window">
        <field name="name">My Project Consumable Indents</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">project.delivery.indent</field>
        <field name="view_mode">list</field>
        <field name="domain">[('project_id.user_id', '=', uid)]</field>
        <field name="context">{'tree_view_ref':'project_indent_list_quick_add_view'}</field>
        <field name="view_ids" eval="
                            [
                            (5, 0, 0),
                            (0, 0, {'view_mode': 'tree', 'view_id': ref('project_indent_list_quick_add_view')}),
                          ]"/>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to define a new Consumable Indent
            </p>
        </field>
    </record>


    <record id="act_project_indent_quick_list_view" model="ir.actions.act_window">
        <field name="name">Add Consumable Indents</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">project.delivery.indent</field>
        <field name="view_mode">tree</field>
        <!--        <field name="view_type">form</field>-->
        <!--        <field eval="3" name="sequence"/>-->
        <field name="domain">[('project_id', '=', active_id)]</field>
        <field name="context">{'search_default_project_id' : [active_id],
            'tree_view_ref':'project_indent_list_quick_add_view', 'default_project_id': active_id}
        </field>
        <field name="view_ids" eval="
                            [
                            (5, 0, 0),
                            (0, 0, {'view_mode': 'tree', 'view_id': ref('project_indent_list_quick_add_view')}),
                          ]"/>

        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to define a new Consumable Indent
            </p>
        </field>
    </record>


    <record id="act_project_cheques_list_view" model="ir.actions.act_window">
        <field name="name">Security Cheques</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">project.project.cheque</field>
        <field name="view_mode">list,form</field>
        <!--        <field name="view_type">tree</field>-->
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to define a new Security Cheque
            </p>
        </field>
    </record>
    <record id="project_cheque_list_view" model="ir.ui.view">
        <field name="model">project.project.cheque</field>
        <field name="type">tree</field>
        <field name="priority" eval="1"/>
        <field name="arch" type="xml">
            <tree string="Project Security Cheques" default_order="id desc">
                <field name="project_id"/>
                <field name="partner_id"/>
                <field name="name" readonly="1"/>
                <field name="cheque_date" readonly="1"/>
                <field name="cheque_amount" readonly="1"/>
                <field name="status" readonly="1"/>
            </tree>
        </field>
    </record>


    <record id="project_security_cheque_form_view" model="ir.ui.view">
        <field name="name">project.project.cheque.form</field>
        <field name="model">project.project.cheque</field>
        <field name="arch" type="xml">
            <form string="Security Cheques">
                <header>
                    <field name="status" widget="statusbar"/>
                </header>
                <sheet string="Security Cheques">
                    <div class="oe_title">
                        <group>
                            <h1>
                                <field name="name"/>
                            </h1>
                        </group>
                    </div>
                    <group>
                        <group>
                            <field name="project_id" options="{'no_create': True, 'no_create_edit':True}"/>
                            <field name="partner_id"/>
                        </group>
                        <group>
                            <field name="cheque_date"/>
                            <field name="cheque_amount"/>
                        </group>
                    </group>
                    <field name="note"/>
                </sheet>
            </form>
        </field>
    </record>

    <record id="project_indent_form_view" model="ir.ui.view">
        <field name="name">project.delivery.indent.form</field>
        <field name="model">project.delivery.indent</field>
        <field name="arch" type="xml">
            <form string="Purchase Indents">
                <header></header>
                <sheet string="Purchase Indent">
                    <div class="oe_title">
                        <group>
                            <h1>
                                <field name="name"/>
                            </h1>
                        </group>
                    </div>
                    <group>
                        <group>
                            <field name="project_id" options="{'no_create': True, 'no_create_edit':True}"
                                   attrs="{'readonly':[('is_readonly','=', True)]}"/>
                            <field name="partner_id" options="{'no_create': True, 'no_create_edit':True}"
                                   attrs="{'readonly':[('is_readonly','=', True)]}"/>
                            <field name="new_item"/>
                            <field name="product_id" options="{'no_create': True, 'no_create_edit':True}"
                                   attrs="{'invisible':[('new_item','!=', True)]}"/>
                            <field name="consumable_list_id" attrs="{'invisible':[('new_item','!=', False)]}"
                                   domain="[('project_id', '=', project_id)]"
                                   options="{'no_create': True, 'no_create_edit':True}"/>
                            <field name="is_readonly" invisible="1"/>
                        </group>
                        <group>
                            <field name="product_qty" string="Quantity"
                                   attrs="{'readonly':[('is_readonly','=', True)]}"/>
                            <field name="unit_cost"/>
                            <field name="estimated_qty"/>
                            <field name="delivered_qty" readonly="1"/>
                            <field name="uom_id" options="{'no_create': True, 'no_create_edit':True}" string="Unit"/>

                        </group>
                    </group>
                    <notebook>
                        <page name="delivery" string="Delivery Lines">
                            <field name="picking_ids" readonly="1"/>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>
    <record id="project_project_orderline_list_view" model="ir.ui.view">
        <field name="model">project.project.orderline</field>
        <field name="type">tree</field>
        <field name="priority" eval="1"/>
        <field name="arch" type="xml">
            <tree string="Project Info" default_order="id desc" create="false" edit="false">
                <field name="project_id" string="Project"/>
                <field name="product_id" string="Product"/>
                <field name="est_product_qty" readonly="1" groups="account.group_account_manager"/>
                <field name="quantity"/>
                <field name="cost" readonly="1"/>
                <field name="cost" invisible="1"/>
                <!--                <field name="dcd_qty" />-->
                <!--                <field name="shop_qty" />-->
                <!--                <field name="indented_qty" />-->
<!--                <field name="qty_delivered"/>-->
                <field name="total_qty_delivered" readonly="1"/>
                <!--                <field name="qty_pending" />-->
                <field name="qty_on_hand"/>
                <field name="qty_purchased"/>
                <field name="qty_return_quantity"/>
                <!--                <field name="state" />-->
                <field name="remarks"/>
            </tree>
        </field>
    </record>


    <record id="project_project_orderline_form_view" model="ir.ui.view">
        <field name="name">project.project.orderline.form</field>
        <field name="model">project.project.orderline</field>
        <field name="arch" type="xml">
            <form string="Project Order Line">
                <header>
                    <!--                    <button string="Send for Quantity Approval" type="object" name="send_approval" class="oe_highlight" attrs="{'invisible':[('state','!=','draft')]}" />-->
                    <!--                    <button string="L1 Quantity Approval" groups="project.group_project_manager" type="object" name="l1_approval" class="oe_highlight" attrs="{'invisible':[('state','!=','send')]}" />-->
                    <!--                    <button string="L2 Quantity Approval"  type="object" name="confirm_state" class="oe_highlight" attrs="{'invisible':[('state','!=','level_1')]}" />-->
                    <!--                    <button string="Unlock" type="object"  name="set_draft" class="oe_highlight" attrs="{'invisible':[('state','!=','confirm')]}" />-->
                    <!--                    <field name="state" invisible="1" />-->
                </header>
                <sheet string="Project Details">
                    <div class="oe_title">
                        <group>
                            <h1>
                                <field name="name" readonly="1"/>
                            </h1>
                        </group>
                    </div>
                    <group>
                        <group string="Project Information">
                            <field name="project_id" readonly="1"/>
                            <field name="project_sales_line_id" readonly="1"/>
                            <field name="est_product_qty" readonly="1" groups="account.group_account_manager"/>
                        </group>
                        <group string="Product Details">
                            <field name="dcd_access" invisible="1"/>
                            <field name="shop_access" invisible="1"/>
                            <field name="product_id" required="1" options="{'no_create': True, 'no_create_edit':True}"/>
                            <!--                            <field name="dcd_qty" attrs="{'readonly':['|', ('state','=','confirm'), ('dcd_access','=', False)]}" />-->
                            <!--                            <field name="shop_qty" attrs="{'readonly':['|', ('state','=','confirm'), ('shop_access','=', False)]}" />-->
                            <field name="quantity"/>
                            <field name="cost" readonly="1"/>
                            <!--                            <field name="indented_qty" />-->
                        </group>
                        <group string="Order Details">
                            <field name="partner_id" readonly="1"/>
                            <field name="order_line_id" readonly="1" options="{'no_create': True, 'no_open': True}"/>
                            <field name="order_id" readonly="1"/>
                            <field name="remarks" readonly="1"/>
                        </group>

                        <group string="Inventory Movements">
                            <field name="qty_on_hand" readonly="1"/>
                            <field name="qty_purchased" readonly="1"/>
                            <field name="qty_balance" readonly="1"/>
<!--                            <field name="qty_delivered" readonly="1"/>-->
                            <field name="total_qty_delivered" readonly="1"/>
                            <!--                            <field name="qty_pending" />-->

                            <field name="qty_return_quantity"/>
                            <field name="qty_balance_delivery" readonly="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Indents">
                            <field name="project_indent_request_ids">
                                <tree string="Project Indents" editable="false" create="false" readonly="1">
                                    <field name="user_id"/>
                                    <field name="requested_date"/>
                                    <field name="date"/>
                                    <field name="qty" sum="Total Quantity"/>
                                    <field name="state" invisible="1"/>
                                </tree>
                                <form>
                                    <header>
                                        <field name="state" widget="statusbar" invisible="1"/>
                                    </header>
                                    <group>
                                        <group>
                                            <field name="user_id"/>
                                            <field name="qty"/>
                                        </group>
                                        <group>
                                            <field name="requested_date"/>
                                            <field name="date" readonly="1"/>
                                        </group>
                                    </group>


                                </form>
                            </field>
                        </page>
                        <page string="Purchases">
                            <field name="project_purchase_ids" context="{'default_project_order_line_id': id}">
                                <tree string="Purchase Order Lines" editable="false" create="true" readonly="0">
                                    <field name="project_order_line_id" invisible="1"/>
                                    <field name="order_id"/>
                                    <field name="project_id" invisible="1"/>
                                    <field name="order_line_id" readonly="0" required="1"
                                           options="{'no_create': True, 'no_create_edit':True}"/>

                                    <!--                                    <field name="order_line_id" readonly="0" required="1" domain="[('project_id', '=', project_id)]" options="{'no_create': True, 'no_create_edit':True}"/>-->
                                    <field name="date_planned"/>
                                    <field name="price_unit"/>
                                    <field name="qty" readonly="1"/>
                                    <field name="price_subtotal"/>
                                </tree>
                                <form>
                                    <header>
                                        <field name="state" widget="statusbar"/>
                                    </header>
                                    <group>
                                        <group>
                                            <field name="order_id"/>
                                            <field name="order_line_id" readonly="1"
                                                   options="{'no_create': True, 'no_open': True}"/>
                                            <field name="date_planned"/>
                                        </group>
                                        <group>
                                            <field name="price_unit"/>
                                            <field name="qty" readonly="1"/>
                                            <field name="price_subtotal"/>
                                        </group>
                                    </group>


                                </form>
                            </field>
                        </page>
                        <page string="Delivery">
                            <field name="project_delivery_ids">
                                <tree string="Delivery Lines" editable="false" create="false" readonly="1">
                                    <field name="picking_id"/>
                                    <field name="move_line_id" readonly="1"/>
                                    <field name="date_planned"/>
                                    <field name="qty" readonly="1"/>
                                    <field name="state"/>
                                </tree>
                                <form>
                                    <header>
                                        <field name="state" widget="statusbar"/>
                                    </header>
                                    <group>
                                        <group>
                                            <field name="picking_id"/>
                                            <field name="move_line_id" readonly="1"/>
                                            <field name="date_planned"/>
                                        </group>
                                        <group>
                                            <field name="qty" readonly="1"/>
                                        </group>
                                    </group>
                                </form>
                            </field>
                        </page>
                        <page string="Inventory Return">
                            <field name="project_return_ids">
                                <tree string="Return Lines" editable="false" create="false" readonly="1">
                                    <field name="inventory_id"/>
                                    <field name="quantity" readonly="1"/>
                                    <field name="state"/>
                                </tree>
                                <form>
                                    <header>
                                        <field name="state" widget="statusbar"/>
                                    </header>
                                    <group>
                                        <group>
                                            <field name="inventory_id"/>
                                            <field name="product_id"/>
                                        </group>
                                        <group>
                                            <field name="quantity" readonly="1"/>
                                        </group>
                                    </group>
                                </form>
                            </field>
                        </page>
                    </notebook>
                </sheet>
                <div class="o_attachment_preview"/>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <record id="project_sale_edit_project_form_view" model="ir.ui.view">
        <field name="inherit_id" ref="project.edit_project"/>
        <field name="model">project.project</field>
        <field name="arch" type="xml">
            <header>
                <button string="Confirm Project" type="object" name="confirm_project" class="oe_highlight"
                        attrs="{'invisible':[('state','!=','draft')]}"/>
                <button string="Complete Project" type="object" name="complete_project" class="oe_highlight"
                        attrs="{'invisible':[('state','!=','ongoing')]}"/>
                <button name="send_approval" type="object" string="Send for Approval" class="oe_highlight"
                        attrs="{'invisible': ['|',('state', '!=', 'ongoing'),('is_approve_request', '!=', False)]}"
                />
                <button name="button_approval" type="object" string="Approve Project"
                        groups="project_sale.group_show_send_approval" class="oe_highlight"
                        attrs="{'invisible': ['|','|',('state', '!=', 'ongoing'),('is_approve_request', '=', False),('is_approved', '!=', False)]}"/>
<!--                <button name="create_rejection" type="object" string="Reject"-->
<!--                        groups="project_sale.group_edit_quotation_approval" class="oe_highlight"-->
<!--                        attrs="{'invisible': [('state', '!=', 'pending')]}"/>-->

                <field name="state" widget="statusbar"/>
            </header>


            <xpath expr="//div[@name='button_box']" position="inside">
                <field name="is_approve_request" invisible="1"/>
                <field name="is_approved" invisible="1"/>
                                <button class="oe_stat_button" type="action" name="%(act_project_indent_quick_list_view)d" icon="fa-pencil-square-o" context="{'default_project_id': id}">
                                    <div class="o_stat_info">
                                        <!-- <field name="bottle_on_hand" class="o_stat_value" /> -->
                                        <span class="o_stat_text">Indents</span>
                                    </div>
                                </button>
                <button class="oe_stat_button" name="action_expense_entries" type="object" icon="fa-pencil-square-o"
                        string="Expenses">
                </button>
                <button class="oe_stat_button" name="action_income_entries" type="object" icon="fa-pencil-square-o"
                        string="Income">
                </button>
                <button class="oe_stat_button" name="action_sale_entries" type="object" icon="fa-pencil-square-o"
                        string="Sales">
                </button>
                <button class="oe_stat_button" name="action_project_order_lines" type="object" icon="fa-pencil-square-o"
                        string="Products">
                </button>
            </xpath>


            <xpath expr="//field[@name='name']" position="before">
                <field name="code" readonly="1" force_save="1"/>
            </xpath>
            <!--            <xpath expr="//field[@name='privacy_visibility']" position="replace"></xpath>-->
            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="description" placeholder="Project description..."/>
                <field name="retention_date"/>
            </xpath>
            <xpath expr="//page[1]" position="after">
<!--                <page name="products" string="Products">-->
<!--                    <field name="project_line_product_ids" nolabel="1">-->
<!--                        <tree>-->
<!--                            <field name="product_id" readonly="1"/>-->
<!--                            <field name="name" readonly="1"/>-->
<!--                            <field name="qty_purchased" readonly="1" string="Purchased"/>-->
<!--                            <field name="qty_on_hand" string="Stock on Hand"/>-->
<!--&lt;!&ndash;                            <field name="qty_delivered" string="Delivered"/>&ndash;&gt;-->
<!--                            <field name="total_qty_delivered" readonly="1"/>-->
<!--                            <field name="uom_id" readonly="1" string="Unit"/>-->
<!--                            <field name="cost"/>-->
<!--                        </tree>-->
<!--                    </field>-->
<!--                </page>-->

                <page name="consumable" string="Consumables">
                    <field name="project_line_consume_ids" nolabel="1">
                        <tree create="false" delete="false" editable="bottom">
                            <field name="product_id" readonly="1"/>
                            <field name="name" readonly="1"/>
                            <field name="product_qty" readonly="1" string="Quantity"/>
                            <field name="uom_id" readonly="1" string="Unit"/>
                        </tree>
                        <form>
                            <field name="product_id" readonly="1"/>
                            <field name="name" readonly="1"/>
                            <field name="product_qty" readonly="1" string="Quantity"/>
                            <field name="uom_id" readonly="1" string="Unit"/>
                        </form>
                    </field>
                </page>
                <page name="service" string="Services">
                    <field name="project_line_service_ids" nolabel="1">
                        <tree>
                            <field name="product_id" readonly="1"/>
                            <field name="name" readonly="1"/>
                        </tree>
                    </field>
                </page>
                <page name="indents" string="Delivery Indents">
                    <field name="project_indent_ids" nolabel="1" context="{'default_project_id': id}" readonly="1">
                        <tree >
                            <field name="project_id" invisible="1"/>
                            <field name="product_id" readonly="0" domain="[('type', '!=', 'service')]"
                       options="{'no_create': True, 'no_create_edit':True}"/>
                            <field name="name" readonly="1" invisible="1"/>
                            <field name="name" invisible="1"/>
                            <field name="product_qty" readonly="0" string="Quantity"/>
                            <field name="uom_id" readonly="1"/>
                            <field name="quantity_on_hand" readonly="1"/>
<!--                            <field name="product_qty" readonly="1"/>-->
                            <field name="product_cost" readonly="1"/>
                            <field name="product_cost" invisible="1"/>
                            <field name="estimated_qty" readonly="1"/>
                            <field name="delivered_qty" readonly="1"/>
                        </tree>
<!--                        <form>-->
<!--                            <group>-->
<!--                                <group>-->
<!--                                    <field name="project_id" invisible="1"/>-->
<!--                                    <field name="new_item"/>-->
<!--                                    <field name="product_id" attrs="{'invisible':[('new_item','!=', True)]}"-->
<!--                                           domain="[('type', '=', 'consu')]" options="{'no_create': True, 'no_create_edit':True}"/>-->
<!--                                    <field name="consumable_list_id" attrs="{'invisible':[('new_item','!=', False)]}"-->
<!--                                           domain="[('project_id', '=', project_id)]"/>-->
<!--                                    <field name="uom_id" string="Unit"/>-->
<!--                                    <field name="product_qty" string="Quantity"/>-->
<!--                                    <field name="product_cost"/>-->
<!--                                </group>-->
<!--&lt;!&ndash;                                <group>&ndash;&gt;-->
<!--&lt;!&ndash;                                    <field name="estimated_qty"/>&ndash;&gt;-->
<!--&lt;!&ndash;                                    <field name="delivered_qty"/>&ndash;&gt;-->
<!--&lt;!&ndash;                                </group>&ndash;&gt;-->
<!--                                <field name="name"/>-->

<!--                            </group>-->

<!--                        </form>-->
                    </field>
                </page>
                <page name="inventory_return" string="Inventory Return">
                    <field name="project_return_ids" nolabel="1">
                        <tree readonly="1" create="false">
                            <field name="project_id" invisible="1"/>
                            <field name="inventory_id"/>
                            <field name="project_id"/>
                            <field name="product_id" options="{'no_create': True, 'no_create_edit':True}"/>
                            <field name="quantity"/>
                            <field name="product_cost" />

                        </tree>
                        <form>
                            <field name="project_id" invisible="1"/>
                            <group>
                                <group>
                                    <field name="inventory_id"/>
                                    <field name="project_id"/>
                                    <field name="quantity"/>
                                </group>
                            </group>
                        </form>
                    </field>
                </page>
                <page name="cheques" string="Cheque Details">
                    <field name="project_cheque_ids" nolabel="1">
                        <tree>
                            <field name="project_id" invisible="1"/>
                            <field name="name"/>
                            <field name="cheque_date"/>
                            <field name="cheque_amount"/>
                            <field name="status"/>
                            <field name="note"/>
                        </tree>
                        <form>
                            <field name="project_id" invisible="1"/>
                            <group>
                                <group>
                                    <field name="name"/>
                                    <field name="cheque_date"/>
                                    <field name="cheque_amount"/>
                                </group>
                                <group>
                                    <field name="status"/>
                                </group>
                            </group>
                            <field name="note" placeholder='Details...'/>
                        </form>
                    </field>
                </page>

            </xpath>
            <xpath expr="//page[1]" position="before">
                <page name="project_summary" string="Project Summary">
                    <group>
                        <group>
                            <button string="Update" type="object" name="update_project_summary" class="oe_highlight"/>
                            <field name="total_material_cost"/>
                            <field name="total_expense"/>
                            <field name="total_income"/>
                        </group>
                        <group>
                            <field name="total_profit"/>
                            <field name="total_profit_per"/>
                        </group>
                    </group>
                </page>
            </xpath>
            <xpath expr="//div[@class='oe_chatter']" position="inside">
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
            </xpath>
        </field>
    </record>
    <record model="ir.ui.view" id="project.view_project_kanban">
        <field name="name">project.project.kanban</field>
        <field name="model">project.project</field>
        <field name="arch" type="xml">
            <kanban class="oe_background_grey o_kanban_dashboard o_project_kanban o_emphasize_colors"
                    on_create="project.open_create_project" sample="1" create="false">
                <field name="name"/>
                <field name="partner_id"/>
                <field name="color"/>
                <field name="task_count"/>
                <field name="label_tasks"/>
                <field name="alias_id"/>
                <field name="alias_name"/>
                <field name="alias_domain"/>
                <field name="is_favorite"/>
                <field name="rating_percentage_satisfaction"/>
                <field name="rating_status"/>
                <field name="rating_active"/>
                <field name="analytic_account_id"/>
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="#{kanban_color(record.color.raw_value)} oe_kanban_global_click o_has_icon">
                            <div class="o_project_kanban_main">
                                <div class="o_kanban_card_content">
                                    <div class="o_kanban_primary_left">
                                        <div class="o_primary">
                                            <span>
                                                <t t-esc="record.name.value"/>
                                            </span>
                                            <span t-if="record.partner_id.value">
                                                <strong>
                                                    <t t-esc="record.partner_id.value"/>
                                                </strong>
                                            </span>
                                        </div>
                                        <div t-if="record.alias_name.value and record.alias_domain.value">
                                            <span>
                                                <i class="fa fa-envelope" role="img" aria-label="Domain Alias"
                                                   title="Domain Alias"></i>
                                                <a t-att-href="'mailto:' + record.alias_id.value" title="Send an email">
                                                    <t t-esc="record.alias_id.value"/>
                                                </a>
                                            </span>
                                        </div>
                                        <div t-if="record.rating_active.raw_value" class="mt8 text-primary"
                                             title="Percentage of happy ratings over the past 30 days."
                                             groups="project.group_project_rating">
                                            <b>
                                                <a name="action_view_all_rating" type="object"
                                                   context="{'search_default_rating_last_30_days':1}">
                                                    <t t-if="record.rating_percentage_satisfaction.value != -1">
                                                        <i class="fa fa-smile-o" role="img"
                                                           aria-label="Percentage of satisfaction"
                                                           title="Percentage of satisfaction"/>
                                                        <t t-esc="record.rating_percentage_satisfaction.value"/>%
                                                    </t>
                                                </a>
                                            </b>
                                        </div>
                                    </div>
                                </div>
                                <div class="o_kanban_card_manage_pane dropdown-menu"
                                     groups="project.group_project_manager" role="menu">
                                    <div class="o_kanban_card_manage_section o_kanban_manage_reports">
                                        <div role="menuitem">
                                            <a name="%(portal.portal_share_action)d" type="action">Share</a>
                                        </div>
                                        <div role="menuitem">
                                            <a type="edit">Edit</a>
                                        </div>
                                    </div>
                                    <div role="menuitem" aria-haspopup="true" class="o_no_padding_kanban_colorpicker">
                                        <ul class="oe_kanban_colorpicker" data-field="color" role="popup"/>
                                    </div>
                                </div>
                                <a class="o_kanban_manage_toggle_button o_left" href="#"
                                   groups="project.group_project_manager">
                                    <i class="fa fa-ellipsis-v" role="img" aria-label="Manage" title="Manage"/>
                                </a>
                                <span class="o_right">
                                    <field name="is_favorite" widget="boolean_favorite" nolabel="1" force_save="1"/>
                                </span>
                            </div>

                            <div class="o_project_kanban_boxes">
                                <a class="o_project_kanban_box" name="action_view_tasks" type="object">
                                    <div>
                                        <span class="o_value">
                                            <t t-esc="record.task_count.value"/>
                                        </span>
                                        <span class="o_label">
                                            <t t-esc="record.label_tasks.value"/>
                                        </span>
                                    </div>
                                </a>
                                <a t-if="record.analytic_account_id.raw_value"
                                   class="o_project_kanban_box o_project_timesheet_box"
                                   name="action_view_account_analytic_line" type="object"
                                   groups="analytic.group_analytic_accounting">
                                    <div>
                                        <span class="o_label">Profitability</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>
    <record id="project.open_view_project_all" model="ir.actions.act_window">
            <field name="name">Projects</field>
            <field name="res_model">project.project</field>
            <field name="domain">[]</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="project.view_project_kanban"/>
            <field name="search_view_id" ref="project.view_project_project_filter"/>
            <field name="target">main</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No projects found. Let's create one!
                </p><p>
                    Projects regroup tasks on the same topic and each have their own dashboard.
                </p>
            </field>
        </record>

    <menuitem action="act_my_project_project_list_view" id="menu_my_project_project_view" parent="project.menu_projects"
              sequence="1"/>

    <menuitem action="act_my_project_sales_view" id="menu_my_project_sales_view" parent="project.menu_projects"
              sequence="10"/>
    <menuitem action="act_my_project_project_orderline_list_view" id="menu_my_project_project_orderline_view"
              parent="project.menu_projects" sequence="15"/>

    <menuitem action="act_my_project_indent_list" id="menu_my_project_indent_view" parent="project.menu_projects"
              sequence="25"/>

    <!-- <menuitem action="act_project_indent_quick_list_view" id="menu_project_indent_quick_list_view" parent="project.menu_projects" sequence="50" /> -->


    <menuitem action="act_project_sales_view" groups="group_show_all_projects" id="menu_project_sales_view"
              parent="project.menu_projects" sequence="30"/>
    <menuitem action="act_project_project_orderline_list_view" groups="group_show_all_projects"
              id="menu_project_project_orderline_view" parent="project.menu_projects" sequence="35"/>
    <menuitem action="act_project_project_list_view" groups="group_show_all_projects" id="menu_project_project_view"
              parent="project.menu_projects" sequence="40"/>
    <menuitem action="act_project_indent_list" groups="group_show_all_projects" id="menu_project_indent_view"
              parent="project.menu_projects" sequence="45"/>


    <menuitem action="act_project_cheques_list_view" groups="account.group_account_manager"
              id="menu_project_cheques_list_view" parent="project.menu_projects" sequence="50"/>

</odoo>